-- Generated by Oracle SQL Developer Data Modeler 4.1.3.901
--   at:        2016-04-26 12:50:17 CEST
--   site:      Oracle Database 12c
--   type:      Oracle Database 12c




CREATE TABLE Komentar
  (
    ID INTEGER NOT NULL ,
    Tekst NVARCHAR2 (200) NOT NULL ,
    Datum_Vreme TIMESTAMP NOT NULL ,
    Korisnik_ID INTEGER ,
    Odgovor_ID  INTEGER NOT NULL
  ) ;
ALTER TABLE Komentar ADD CONSTRAINT Komentar_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Korisnik
  (
    ID INTEGER NOT NULL ,
    Username NVARCHAR2 (20) NOT NULL ,
    Password NVARCHAR2 (20) NOT NULL ,
    Email NVARCHAR2 (50) NOT NULL ,
    Ime NVARCHAR2 (20) ,
    Prezime NVARCHAR2 (20) ,
    Broj_Indeksa NUMBER (5) NOT NULL ,
    Slika NVARCHAR2 (200) ,
    Smer NVARCHAR2 (50) ,
    Opis NVARCHAR2 (1000) ,
    Godina_Studija NUMBER (1) ,
    Role_ID        INTEGER NOT NULL ,
    Status_ID      INTEGER NOT NULL
  ) ;
ALTER TABLE Korisnik ADD CONSTRAINT Korisnik_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Literatura
  (
    ID INTEGER NOT NULL ,
    Naziv NVARCHAR2 (50) ,
    LINK NVARCHAR2 (200) NOT NULL ,
    Oblast_ID INTEGER NOT NULL
  ) ;
ALTER TABLE Literatura ADD CONSTRAINT Literatura_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Oblast
  (
    ID INTEGER NOT NULL ,
    Ime NVARCHAR2 (50) NOT NULL ,
    Predmet_ID INTEGER NOT NULL
  ) ;
ALTER TABLE Oblast ADD CONSTRAINT Oblast_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Odgovor
  (
    ID INTEGER NOT NULL ,
    Tekst NVARCHAR2 (1000) NOT NULL ,
    Plus        NUMBER (5) ,
    "Minus"     NUMBER (5) ,
    Odobreno    NUMBER ,
    Datum_Vreme TIMESTAMP NOT NULL ,
    Korisnik_ID INTEGER ,
    Pitanje_ID  INTEGER NOT NULL
  ) ;
ALTER TABLE Odgovor ADD CONSTRAINT Odgovor_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Pitanje
  (
    ID INTEGER NOT NULL ,
    Tekst NVARCHAR2 (500) NOT NULL ,
    Datum_Vreme TIMESTAMP NOT NULL ,
    Korisnik_ID INTEGER ,
    Oblast_ID   INTEGER
  ) ;
ALTER TABLE Pitanje ADD CONSTRAINT Pitanje_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Pitanje_Tag
  (
    ID         INTEGER NOT NULL ,
    Pitanje_ID INTEGER NOT NULL ,
    Tag_ID     INTEGER NOT NULL
  ) ;
ALTER TABLE Pitanje_Tag ADD CONSTRAINT Pitanje_Tag_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Predlozeni_Tag
  (
    ID INTEGER NOT NULL ,
    Ime NVARCHAR2 (50) ,
    Tag_Ime NVARCHAR2 (1) ,
    Opis NVARCHAR2 (200) ,
    Datum_Postavljanja TIMESTAMP NOT NULL ,
    Datum_Obrade       TIMESTAMP
  ) ;
ALTER TABLE Predlozeni_Tag ADD CONSTRAINT Predlozeni_Tag_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Predmet
  (
    ID INTEGER NOT NULL ,
    Naziv NVARCHAR2 (50) NOT NULL ,
    Godina_Studija NUMBER (1) NOT NULL ,
    Semestar       NUMBER (2) NOT NULL ,
    Zaduzen_ID     INTEGER
  ) ;
ALTER TABLE Predmet ADD CONSTRAINT Predmet_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Predmet_Smer
  (
    ID         INTEGER NOT NULL ,
    Smer_ID    INTEGER NOT NULL ,
    Predmet_ID INTEGER NOT NULL
  ) ;
ALTER TABLE Predmet_Smer ADD CONSTRAINT Predmet_Smer_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Profesor
  (
    ID INTEGER NOT NULL ,
    Puno_Ime NVARCHAR2 (50) NOT NULL ,
    Predmet_ID INTEGER NOT NULL
  ) ;
ALTER TABLE Profesor ADD CONSTRAINT Profesor_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Role
  (
    ID INTEGER NOT NULL ,
    Ime NVARCHAR2 (20) NOT NULL ,
    Opis NVARCHAR2 (200)
  ) ;
ALTER TABLE Role ADD CONSTRAINT Role_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Slika
  (
    ID INTEGER NOT NULL ,
    LINK NVARCHAR2 (200) NOT NULL ,
    Odgovor_ID INTEGER NOT NULL
  ) ;
ALTER TABLE Slika ADD CONSTRAINT Slika_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Smer
  ( ID INTEGER NOT NULL , Ime NVARCHAR2 (1) NOT NULL
  ) ;
ALTER TABLE Smer ADD CONSTRAINT Smer_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Status
  (
    ID INTEGER NOT NULL ,
    Ime NVARCHAR2 (20) NOT NULL ,
    Opis NVARCHAR2 (200)
  ) ;
ALTER TABLE Status ADD CONSTRAINT Status_PK PRIMARY KEY ( ID ) ;


CREATE TABLE Tag
  (
    ID INTEGER NOT NULL ,
    Ime NVARCHAR2 (20) ,
    Tag_Ime NVARCHAR2 (10) NOT NULL ,
    Opis NVARCHAR2 (200)
  ) ;
ALTER TABLE Tag ADD CONSTRAINT Tag_PK PRIMARY KEY ( ID ) ;


ALTER TABLE Komentar ADD CONSTRAINT Komentar_Korisnik_FK FOREIGN KEY ( Korisnik_ID ) REFERENCES Korisnik ( ID ) ;

ALTER TABLE Komentar ADD CONSTRAINT Komentar_Odgovor_FK FOREIGN KEY ( Odgovor_ID ) REFERENCES Odgovor ( ID ) ON
DELETE CASCADE ;

ALTER TABLE Korisnik ADD CONSTRAINT Korisnik_Role_FK FOREIGN KEY ( Role_ID ) REFERENCES Role ( ID ) ;

ALTER TABLE Korisnik ADD CONSTRAINT Korisnik_Status_FK FOREIGN KEY ( Status_ID ) REFERENCES Status ( ID ) ;

ALTER TABLE Literatura ADD CONSTRAINT Literatura_Oblast_FK FOREIGN KEY ( Oblast_ID ) REFERENCES Oblast ( ID ) ON
DELETE CASCADE ;

ALTER TABLE Oblast ADD CONSTRAINT Oblast_Predmet_FK FOREIGN KEY ( Predmet_ID ) REFERENCES Predmet ( ID ) ON
DELETE CASCADE ;

ALTER TABLE Odgovor ADD CONSTRAINT Odgovor_Korisnik_FK FOREIGN KEY ( Korisnik_ID ) REFERENCES Korisnik ( ID ) ;

ALTER TABLE Odgovor ADD CONSTRAINT Odgovor_Pitanje_FK FOREIGN KEY ( Pitanje_ID ) REFERENCES Pitanje ( ID ) ON
DELETE CASCADE ;

ALTER TABLE Pitanje ADD CONSTRAINT Pitanje_Korisnik_FK FOREIGN KEY ( Korisnik_ID ) REFERENCES Korisnik ( ID ) ;

ALTER TABLE Pitanje ADD CONSTRAINT Pitanje_Oblast_FK FOREIGN KEY ( Oblast_ID ) REFERENCES Oblast ( ID ) ;

ALTER TABLE Pitanje_Tag ADD CONSTRAINT Pitanje_Tag_Pitanje_FK FOREIGN KEY ( Pitanje_ID ) REFERENCES Pitanje ( ID ) ON
DELETE CASCADE ;

ALTER TABLE Pitanje_Tag ADD CONSTRAINT Pitanje_Tag_Tag_FK FOREIGN KEY ( Tag_ID ) REFERENCES Tag ( ID ) ON
DELETE CASCADE ;

ALTER TABLE Predmet ADD CONSTRAINT Predmet_Korisnik_FK FOREIGN KEY ( Zaduzen_ID ) REFERENCES Korisnik ( ID ) ;

ALTER TABLE Predmet_Smer ADD CONSTRAINT Predmet_Smer_Predmet_FK FOREIGN KEY ( Predmet_ID ) REFERENCES Predmet ( ID ) ON
DELETE CASCADE ;

ALTER TABLE Predmet_Smer ADD CONSTRAINT Predmet_Smer_Smer_FK FOREIGN KEY ( Smer_ID ) REFERENCES Smer ( ID ) ON
DELETE CASCADE ;

ALTER TABLE Profesor ADD CONSTRAINT Profesor_Predmet_FK FOREIGN KEY ( Predmet_ID ) REFERENCES Predmet ( ID ) ON
DELETE CASCADE ;

ALTER TABLE Slika ADD CONSTRAINT Slika_Odgovor_FK FOREIGN KEY ( Odgovor_ID ) REFERENCES Odgovor ( ID ) ON
DELETE CASCADE ;


-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            16
-- CREATE INDEX                             0
-- ALTER TABLE                             33
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- TSDP POLICY                              0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
